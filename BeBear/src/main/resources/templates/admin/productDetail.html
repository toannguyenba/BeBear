<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<title>Mega Able bootstrap admin template by codedthemes</title>
<!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 10]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
      <![endif]-->
<!-- Meta -->
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description"
	content="Mega Able Bootstrap admin template made using Bootstrap 4 and it has huge amount of ready made feature, UI components, pages which completely fulfills any dashboard needs." />
<meta name="keywords"
	content="bootstrap, bootstrap admin template, admin theme, admin dashboard, dashboard template, admin template, responsive" />
<meta name="author" content="codedthemes" />
<!-- Favicon icon -->
<link rel="icon" href="/admin/images/favicon.ico" type="image/x-icon">
<!-- Google font-->
<link href="https://fonts.googleapis.com/css?family=Roboto:400,500"
	rel="stylesheet">
<!-- waves.css -->
<link rel="stylesheet" href="/admin/pages/waves/css/waves.min.css"
	type="text/css" media="all">
<!-- Required Fremwork -->
<link rel="stylesheet" type="text/css"
	href="/admin/css/bootstrap/css/bootstrap.min.css">
<!-- waves.css -->
<link rel="stylesheet" href="/admin/pages/waves/css/waves.min.css"
	type="text/css" media="all">
<!-- themify icon -->
<link rel="stylesheet" type="text/css"
	href="/admin/icon/themify-icons/themify-icons.css">
<!-- Font Awesome -->
<link rel="stylesheet" type="text/css"
	href="/admin/icon/font-awesome/css/font-awesome.min.css">
<!-- scrollbar.css -->
<link rel="stylesheet" type="text/css"
	href="/admin/css/jquery.mCustomScrollbar.css">
<!-- am chart export.css -->
<link rel="stylesheet"
	href="https://www.amcharts.com/lib/3/plugins/export/export.css"
	type="text/css" media="all" />
<!-- Style.css -->
<link rel="stylesheet" type="text/css" href="/admin/css/style.css">
</head>
<body>
	<div id="pcoded" class="pcoded">
		<div class="pcoded-overlay-box"></div>
		<div class="pcoded-container navbar-wrapper">
			<!-- Menu Top start -->
			<div th:insert="/admin/menu-top.html"></div>
			<!-- Menu Top end -->
			<div class="pcoded-main-container">
				<div class="pcoded-wrapper">
					<!-- Menu Right start -->
					<div th:insert="/admin/menu-right.html"></div>
					<!-- Menu Right end -->
					<div class="pcoded-content">
						<div class="pcoded-inner-content">
							<!-- Main-body start -->
							<div class="main-body" id="app">
								<div class="page-wrapper">
									<!-- Page-body start -->
									<div class="page-body">
										<div class="main-search morphsearch-search">
											<div class="input-group">
												<span class="input-group-addon search-close">Tìm
													kiếm: </span> <input type="text" class="form-control"> <span
													class="input-group-addon search-btn"><i
													class="ti-search"></i></span>
											</div>
										</div>
										<!-- Hover table card start -->
										<div class="card">
											<div class="card-header">
												<h3>Danh sách màu</h3>
												<div class="card-header-right">
													<button
														class="btn btn-primary btn-round waves-effect waves-light"
														@click="add('Thêm chi tiết sản phẩm')" data-toggle="modal"
														data-target=".bd-example-modal-lg">Thêm chi tiết
														sản phẩm</button>
													<ul class="list-unstyled card-option">
														<li><i class="fa fa fa-wrench open-card-option"></i></li>
														<li><i class="fa fa-window-maximize full-card"></i></li>
														<li><i class="fa fa-minus minimize-card"></i></li>
														<li><i class="fa fa-refresh reload-card"></i></li>
														<li><i class="fa fa-trash close-card"></i></li>
													</ul>
												</div>
											</div>
											<div class="card-block table-border-style">
												<div class="table-responsive">
													<table
														class="table table-sm table-striped table-hover table-bordered">
														<thead style="background-color: #448aff; color: white">
															<tr>
																<th style="width: 5%;">STT</th>
																<th>Loại sản phẩm</th>
																<th>Màu sắc</th>
																<th>Kích thước</th>
																<th>Giá</th>
																<th>Giá sale</th>
																<th>Trạng thái</th>
																<th>Hình ảnh</th>
																<th>Công cụ</th>
															</tr>
														</thead>
														<tbody>
															<tr v-for="(pro,index) in productDetails">
																<th scope="row">{{ index+1 }}</th>
																<td>{{ pro.idProduct.productName }}</td>
																<td>{{ pro.idColor.colorName }}</td>
																<td>{{ pro.idSize.sizeName }}</td>
																<td>{{ pro.price }}</td>
																<td>{{ pro.salePrice }}</td>
																<td>{{ status[index] }}</td>
																<td>
																	<img style="width: 30px; height: 30px" alt="" :src="pro.productPhotos[0].url" v-if="pro.productPhotos.length > 0">
																</td>
																<td><a data-toggle="modal"
																	data-target=".bd-example-modal-lg" class="icon-tool"
																	@click="edit(index, 'Chỉnh sửa chi tiết sản phẩm')"><i
																		class="ti-pencil"></i></a> <a data-toggle="modal"
																	data-target=".bd-example-modal-md" class="icon-tool"
																	@click="remove(pro.idProductDetail)"><i
																		class="ti-trash"></i></a> <a data-toggle="modal"
																	data-target=".bd-example-modal-md" class="icon-tool"
																	@click="updateImage(pro.idProductDetail)"><i
																		class="ti-image"></i></a></td>
															</tr>
														</tbody>
													</table>
													<br />
													<nav aria-label="Page navigation example">
														<ul
															class="pagination pagination-sm justify-content-center">
															<li class="page-item"><a class="page-link"
																href="/admin/productDetail?currentPage=1" aria-label="Previous">
																	<span aria-hidden="true">&laquo;</span> <span
																	class="sr-only">First</span>
															</a></li>
															<li class="page-item"
																th:each="number: ${#numbers.sequence({pageUtil.firstPage}, {pageUtil.lastPage})}"><a
																class="page-link"
																th:href="@{/admin/productDetail(currentPage=${number})}"
																th:text="${number}"></a></li>

															<li class="page-item"><a class="page-link"
																th:href="@{/admin/productDetail(currentPage=${pageUtil.totalPage})}"
																aria-label="Next"> <span aria-hidden="true">&raquo;</span>
																	<span class="sr-only">End</span>
															</a></li>
														</ul>
													</nav>
													<div class="modal fade bd-example-modal-lg" tabindex="-1"
														role="dialog" aria-labelledby="myLargeModalLabel"
														aria-hidden="true">
														<div class="modal-dialog modal-lg">
															<div class="modal-content">
																<form :action="link" th:object="${productDetail}"
																	method="post" enctype="multipart/form-data">
																	<div class="modal-header">
																		<h5 class="modal-title" id="exampleModalLongTitle">
																			{{ title }}</h5>
																		<button type="button" class="close"
																			data-dismiss="modal" aria-label="Close">
																			<span aria-hidden="true">&times;</span>
																		</button>
																	</div>
																	<div class="modal-body">
																		<div class="form-group row">
																			<div class="col-sm-6">
																				<h4>Giá</h4>
																				<input type="text" class="form-control"
																					name="price" v-model="p.price"> <input
																					type="hidden" v-if="link == 'editProductDetail'"
																					name="idProductDetail"
																					v-model="p.idProductDetail">
																			</div>
																			<div class="col-sm-6">
																				<h4>Số lượng</h4>
																				<input type="text" class="form-control"
																					name="quantity" v-model="p.quantity">
																			</div>
																			<div class="col-sm-6">
																				<h4>Sản phẩm</h4>
																				<select type="text" class="form-control"
																					th:field="*{idProduct}"
																					v-model="p.idProduct.idProduct">
																					<option th:each="product : ${products}"
																						th:value="${product.idProduct}"
																						th:text="${product.productName}"></option>
																				</select>
																			</div>
																			<div class="col-sm-6">
																				<h4>Màu sắc</h4>
																				<select type="text" class="form-control"
																					th:field="*{idColor}" v-model="p.idColor.idColor">
																					<option th:each="color : ${colors}"
																						th:value="${color.idColor}"
																						th:text="${color.colorName}"></option>
																				</select>
																			</div>
																			<div class="col-sm-6">
																				<h4>Kích thước</h4>
																				<select type="text" class="form-control"
																					th:field="*{idSize}" v-model="p.idSize.idSize">
																					<option th:each="size : ${sizes}"
																						th:value="${size.idSize}"
																						th:text="${size.sizeName}"></option>
																				</select>
																			</div>
																			<div class="col-sm-6">
																				<h4>Giá sale</h4>
																				<input type="text" class="form-control"
																					name="salePrice" v-model="p.salePrice">
																			</div>
																			<div class="col-sm-6">
																				<h4>Trạng thái</h4>
																				<select class="form-control" name="status"
																					v-model="p.status">
																					<option value="0">Normal</option>
																					<option value="1">Hot</option>
																					<option value="2">Sale</option>
																				</select>
																			</div>
																			<div class="col-sm-6">
																				<h4>Thêm ảnh</h4>
																				<input type="file" name="file" multiple="multiple" />
																			</div>
																		</div>
																	</div>
																	<div class="modal-footer">
																		<button type="button" class="btn btn-secondary"
																			@click="close()" data-dismiss="modal">Đóng</button>
																		<button type="submit" class="btn btn-primary">Lưu</button>
																	</div>
																</form>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
										<!-- Hover table card end -->
									</div>
								</div>
								<!-- Page-body end -->
							</div>
							<div id="styleSelector"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- JavaScript -->
	<script src="https://unpkg.com/vue/dist/vue.js"></script>
	<script th:inline="javascript">
    var app= new Vue({
  		el: '#app',
        data: {
        		productDetails: [],
      			p: {
      				idProduct: {idProduct: ""},
      				idColor: {idColor: ""},
      				idSize: {idSize: ""}
      			},
      			title: '',
      			link: '',
      			id: 0,
      			status: []
  			  },
        methods: {
            edit(index, title) {
                this.p = JSON.parse(JSON.stringify(this.productDetails[index]));
                this.title = title;
                this.link = 'editProductDetail';
            },
            add(title) {
            	this.title = title;
            	this.link = 'addProductDetail';
            },
            close() {
            	this.p = {
          				idProduct: {idProduct: ""},
          				idColor: {idColor: ""},
          				idSize: {idSize: ""}
          			}
            }
        },
        mounted() {
            this.productDetails = [[${productDetails}]];
            console.log(this.productDetails);
            let self = this;
            var list = this.productDetails
             for(var i = 0; i < list.length; i++){
                switch(list[i].status) {
            	case 0:
                	self.status[i] = "Normal";
                	break;
              	case 1:
              		self.status[i] = "Hot";
                	break;
              	default:
              		self.status[i] = "Sale";
            	}
            }
        }
  })  
</script>
	<script type="text/javascript" src="/admin/js/jquery/jquery.min.js"></script>
	<script type="text/javascript"
		src="/admin/js/jquery-ui/jquery-ui.min.js "></script>
	<script type="text/javascript" src="/admin/js/popper.js/popper.min.js"></script>
	<script type="text/javascript"
		src="/admin/js/bootstrap/js/bootstrap.min.js "></script>
	<script type="text/javascript" src="/admin/pages/widget/excanvas.js "></script>
	<!-- waves js -->
	<script src="/admin/pages/waves/js/waves.min.js"></script>
	<!-- jquery slimscroll js -->
	<script type="text/javascript"
		src="/admin/js/jquery-slimscroll/jquery.slimscroll.js "></script>
	<!-- modernizr js -->
	<script type="text/javascript" src="/admin/js/modernizr/modernizr.js "></script>
	<!-- slimscroll js -->
	<script type="text/javascript" src="/admin/js/SmoothScroll.js"></script>
	<script src="/admin/js/jquery.mCustomScrollbar.concat.min.js "></script>
	<!-- Chart js -->
	<script type="text/javascript" src="/admin/js/chart.js/Chart.js"></script>
	<!-- amchart js -->
	<script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
	<script src="/admin/pages/widget/amchart/gauge.js"></script>
	<script src="/admin/pages/widget/amchart/serial.js"></script>
	<script src="/admin/pages/widget/amchart/light.js"></script>
	<script src="/admin/pages/widget/amchart/pie.min.js"></script>
	<script
		src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
	<!-- menu js -->
	<script src="/admin/js/pcoded.min.js"></script>
	<script src="/admin/js/vertical-layout.min.js "></script>
	<!-- custom js -->
	<script type="text/javascript"
		src="/admin/pages/dashboard/custom-dashboard.js"></script>
	<script type="text/javascript" src="/admin/js/script.js "></script>
</body>
</html>